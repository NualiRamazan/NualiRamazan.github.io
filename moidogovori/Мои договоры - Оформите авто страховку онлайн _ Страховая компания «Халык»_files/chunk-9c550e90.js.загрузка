(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9c550e90"],{"14fe":function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"user-policies"},[s("div",{staticClass:"menu"},[t._t("default")],2),s("div",{staticClass:"content loading-wrap"},[t.formLoading>0?s("div",{staticClass:"loading"}):t._e(),s("span",[t._v(t._s(t.debug))]),s("div",{staticClass:"switch"},[s("button",{staticClass:"tab",class:{current:"current"===t.activeTab},on:{click:function(i){t.activeTab="current"}}},[t._v(" "+t._s(t.$v("STR_ACTIVE_POLICIES"))+" ")]),s("button",{staticClass:"tab",class:{current:"archive"===t.activeTab},on:{click:function(i){t.activeTab="archive"}}},[t._v(" "+t._s(t.$v("STR_ARCHIVE_POLICIES"))+" ")])]),t.filteredList&&t.filteredList.length>0?[s("table",{staticClass:"list"},[s("tr",{staticClass:"title"},[s("td",[t._v(t._s(t.$v("STR_NUM")))]),s("td",[t._v(t._s(t.$v("STR_DATE")))]),s("td",[t._v(t._s(t.$v("STR_VALIDITY_PERIOD")))]),s("td",[t._v(t._s(t.$v("STR_PRODUCT")))]),s("td",[t._v(" ")])]),t._l(t.filteredList,(function(i){return s("tr",{key:i.id,staticClass:"list-item",on:{click:function(s){return t.showPolicy(i.id)}}},[s("td",{staticClass:"list-cell"},[s("span",{staticClass:"caption"},[t._v(t._s(t.$v("STR_NUM"))+": ")]),t._v(t._s(i.id)+" ")]),s("td",{staticClass:"list-cell"},[s("span",{staticClass:"caption"},[t._v(t._s(t.$v("STR_DATE"))+": ")]),t._v(t._s(t._f("formatDateShort")(i.issueDate))+" ")]),s("td",{staticClass:"list-cell"},[s("span",{staticClass:"caption"},[t._v(t._s(t.$v("STR_VALIDITY_PERIOD"))+": ")]),t._v(" "+t._s(t._f("formatDateShort")(i.beginDate))+" - "+t._s(t._f("formatDateShort")(i.endDate))+" ")]),s("td",{staticClass:"list-cell"},[s("span",{staticClass:"caption"},[t._v(t._s(t.$v("STR_PRODUCT"))+": ")]),t._v(t._s(t.dictionaries.instTypes[i.type]||"-")+" ")]),s("td",{staticClass:"list-cell icon-cell"},[s("svg-icon",{attrs:{icon:"eye"}})],1)])}))],2)]:t.formLoading<1&&(!t.filteredList||t.filteredList.length<1)?[s("div",{staticClass:"list-empty"},[t._v(t._s(t.$v("MSG_CONTENT_EMPTY")))]),s("br"),s("br"),s("br")]:t._e(),t.formLoading>0&&(!t.list||t.list.length<1)?[s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br")]:t._e()],2),s("div",{staticClass:"policy-overlyay",class:{open:t.policyOpen},on:{click:t.closePolicy}},[s("div",{staticClass:"policy-view",on:{click:function(t){t.stopPropagation()}}},[t.policy?[s("div",{staticClass:"title"},[s("div",{staticClass:"big"},[t._v(" "+t._s(t.$v("STR_CONTRACT_NUM"))+" "+t._s(t.policy.policyID)+" ")]),s("div",{staticClass:"small"},[t._v(" от "+t._s(t._f("formatDateShort")(t.policy.date))+" ")]),s("button",{staticClass:"close",on:{click:t.closePolicy}},[s("svg-icon",{attrs:{icon:"close"}})],1)]),s("div",{staticClass:"scroll"},[s("div",{staticClass:"content"},[t.policy.productId&&t.dictionaries.instTypes[t.policy.productId]?s("div",{staticClass:"block"},[s("div",{staticClass:"caption"},[t._v(" "+t._s(t.$v("STR_PRODUCT_NAME"))+": ")]),s("div",{staticClass:"value strong green"},[t._v(" "+t._s(t.dictionaries.instTypes[t.policy.productId])+" ")])]):t._e(),s("div",{staticClass:"block"},[s("div",{staticClass:"caption"},[t._v(" "+t._s(t.$v("STR_VALIDITY_PERIOD"))+": ")]),s("div",{staticClass:"value strong"},[t._v(" "+t._s(t._f("formatDateShort")(t.policy.beginDate))+" - "+t._s(t._f("formatDateShort")(t.policy.endDate))+" ")])]),t.policy.insurant?s("div",{staticClass:"block"},[s("div",{staticClass:"caption"},[t._v(" "+t._s(t.$v("STR_INSURANT"))+": ")]),s("div",{staticClass:"value"},[t._v(t._s(t.policy.insurant))])]):t._e(),t.policy.insured&&t.policy.insured.length>0?s("div",{staticClass:"block"},[s("div",{staticClass:"caption"},[t._v(" "+t._s(t.$v("STR_INSUREDS2"))+": ")]),s("div",{staticClass:"value"},[t._v(" "+t._s(t.policy.insured.join(", "))+" ")])]):t._e(),t.policy.insuranceObject?s("div",{staticClass:"block"},[s("div",{staticClass:"caption"},[t._v(" "+t._s(t.$v("STR_INSURANCE_OBJECT"))+": ")]),s("div",{staticClass:"value"},[t._v(" "+t._s(t.policy.insuranceObject)+" ")])]):t._e(),s("div",{staticClass:"block"},[t.compulsoryProducts.includes(t.policy.productId)?[s("a",{staticClass:"download-link",attrs:{href:"/api/PDF/downloadCompulsoryСontract/"+t.policy.pdfToken,target:"_blank",download:""}},[s("svg-icon",{attrs:{icon:"download"}}),t._v(t._s(t.$v("STR_CONTRACT_DOWNLOAD")))],1)]:[s("a",{staticClass:"download-link",attrs:{href:"/api/PDF/download/"+t.policy.pdfToken,target:"_blank",download:""}},[s("svg-icon",{attrs:{icon:"download"}}),t._v(t._s(t.$v("STR_CONTRACT_DOWNLOAD")))],1)]],2),t.showConfirmation?s("div",{staticClass:"block"},[t.compulsoryProducts.includes(t.policy.productId)?[s("a",{staticClass:"download-link",attrs:{href:"/api/PDF/download/"+t.policy.pdfToken,target:"_blank",download:""}},[s("svg-icon",{attrs:{icon:"download"}}),t._v(t._s(t.$v("STR_CONFIRMATION_DOWNLOAD")))],1)]:[s("a",{staticClass:"download-link",attrs:{href:"/api/PDF/downloadConfirmation/"+t.policy.pdfToken,target:"_blank",download:""}},[s("svg-icon",{attrs:{icon:"download"}}),t._v(t._s(t.$v("STR_CONFIRMATION_DOWNLOAD")))],1)]],2):t._e(),s("div",{staticClass:"block actions"},[t.isPolicyActive&&t.policy.isInshurer?s("a",{staticClass:"button",attrs:{href:"/terminate-policy/id/"+t.policy.policyID}},[t._v(" "+t._s(t.$v("STR_TERMINATE_THE_POLICY"))+" ")]):t._e(),1e3==t.policy.productId&&t.isPolicyActive&&"person"!=t.clientKind?s("a",{staticClass:"link-button",attrs:{href:"/ogpo-avto/id/"+t.policy.policyID}},[t._v(" "+t._s(t.$v("STR_REISSUE_THE_POLICY"))+" ")]):t._e(),1e3==t.policy.productId&&t.policy.isInshurer&&!t.isPolicyActive&&"person"!=t.clientKind?s("a",{staticClass:"link-button",attrs:{href:"/ogpo-avto/id/"+t.policy.policyID}},[t._v(" "+t._s(t.$v("STR_RENEW_THE_POLICY"))+" ")]):t._e(),1e3==t.policy.productId&&t.policy.isInshurer&&t.isPolicyActive&&"person"==t.clientKind?s("a",{staticClass:"link-button",attrs:{href:"/ogpo-avto-personal/id/"+t.policy.policyID}},[t._v(" "+t._s(t.$v("STR_REISSUE_THE_POLICY"))+" ")]):t._e(),1e3==t.policy.productId&&t.policy.isInshurer&&!t.isPolicyActive&&"person"==t.clientKind?s("a",{staticClass:"link-button",attrs:{href:"/ogpo-avto-personal/id/"+t.policy.policyID}},[t._v(" "+t._s(t.$v("STR_RENEW_THE_POLICY"))+" ")]):t._e()])])])]:t._e()],2)])])},a=[],o=s("a109"),n=s("652a"),c={name:"UserPolicies",props:{clientKind:String},data(){return{list:[],policy:null,policyOpen:!1,activeTab:"current",formLoading:0,debug:"",dictionaries:{instTypes:[]}}},computed:{compulsoryProducts(){return[1e3,1400,1550,1600,1800,1900]},filteredList(){const t=this.activeTab;return(this.list||[]).filter(i=>"current"==t?this.isPolicyItemActive(i):!this.isPolicyItemActive(i))},isPolicyActive(){const t=this.policy||{},i=Object(n["a"])(t.endDate||"1970-01-01 00:00:00").getTime(),s=t.state||0;return 99!=s&&30!=s&&i>=Date.now()},showConfirmation(){return this.policy&&this.policy.productId&&1e3==this.policy.productId}},watch:{policyOpen(t){t?document.body.classList.add("no-scroll"):document.body.classList.remove("no-scroll")}},methods:{showPolicy(t){this.formLoading++,this.policyOpen=!1,this.$axios.get("/User/getPolicy/"+t).then(t=>{this.formLoading--,0===t.code&&t.data?(this.policy=t.data,this.policyOpen=!0):0!==t.code&&this.$root.openDialog(Object(o["a"])(t),{html:!0,textClass:["text-align-center"]})}).catch(t=>{throw this.formLoading--,t})},closePolicy(){this.policyOpen=!1},isPolicyItemActive(t){return 99!=t.state&&30!=t.state&&t.endDate.getTime()>=Date.now()}},mounted(){this.formLoading++,this.$axios.get("/User/getPoliciesDictionaries").then(t=>{this.formLoading--,0===t.code&&t.data?this.dictionaries=t.data:0!==t.code&&this.$root.openDialog(Object(o["a"])(t),{html:!0,textClass:["text-align-center"]})}).catch(t=>{throw this.formLoading--,t}),this.formLoading++,this.$axios.get("/User/listPolicies").then(t=>{this.formLoading--,0===t.code?this.list=t.data.map((function(t){return t.issueDate=Object(n["a"])(t.issueDate),t.beginDate=Object(n["a"])(t.beginDate),t.endDate=Object(n["a"])(t.endDate),t})):this.$root.openDialog(Object(o["a"])(t),{html:!0,textClass:["text-align-center"]})}).catch(t=>{console.error(t),this.$root.openDialog(this.$v("STR_SYSTEM_ERROR"),{html:!0,textClass:["text-align-center"]})})}},r=c,l=(s("47bb"),s("2877")),p=Object(l["a"])(r,e,a,!1,null,"6b1566b7",null);i["default"]=p.exports},"47bb":function(t,i,s){"use strict";s("5047")},5047:function(t,i,s){},a109:function(t,i,s){"use strict";var e=s("e19f"),a=s("a6fe");i["a"]=function(t){if(0===t.code)return null;let i=null;return t.msgId&&(i=Object(a["a"])(t.msgId),i&&i.length>0&&t.msgData&&(i=Object(e["vsprintf"])(i,t.msgData))),!i&&t.rawMsg&&(i=t.rawMsg),i||(i=Object(a["a"])("STR_SYSTEM_ERROR")),i||(i="Произошла ошибка"),i}},e19f:function(t,i,s){var e;!function(){"use strict";var a={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(t){return c(l(t),arguments)}function n(t,i){return o.apply(null,[t].concat(i||[]))}function c(t,i){var s,e,n,c,r,l,p,d,_,u=1,v=t.length,y="";for(e=0;e<v;e++)if("string"===typeof t[e])y+=t[e];else if("object"===typeof t[e]){if(c=t[e],c.keys)for(s=i[u],n=0;n<c.keys.length;n++){if(void 0==s)throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',c.keys[n],c.keys[n-1]));s=s[c.keys[n]]}else s=c.param_no?i[c.param_no]:i[u++];if(a.not_type.test(c.type)&&a.not_primitive.test(c.type)&&s instanceof Function&&(s=s()),a.numeric_arg.test(c.type)&&"number"!==typeof s&&isNaN(s))throw new TypeError(o("[sprintf] expecting number but found %T",s));switch(a.number.test(c.type)&&(d=s>=0),c.type){case"b":s=parseInt(s,10).toString(2);break;case"c":s=String.fromCharCode(parseInt(s,10));break;case"d":case"i":s=parseInt(s,10);break;case"j":s=JSON.stringify(s,null,c.width?parseInt(c.width):0);break;case"e":s=c.precision?parseFloat(s).toExponential(c.precision):parseFloat(s).toExponential();break;case"f":s=c.precision?parseFloat(s).toFixed(c.precision):parseFloat(s);break;case"g":s=c.precision?String(Number(s.toPrecision(c.precision))):parseFloat(s);break;case"o":s=(parseInt(s,10)>>>0).toString(8);break;case"s":s=String(s),s=c.precision?s.substring(0,c.precision):s;break;case"t":s=String(!!s),s=c.precision?s.substring(0,c.precision):s;break;case"T":s=Object.prototype.toString.call(s).slice(8,-1).toLowerCase(),s=c.precision?s.substring(0,c.precision):s;break;case"u":s=parseInt(s,10)>>>0;break;case"v":s=s.valueOf(),s=c.precision?s.substring(0,c.precision):s;break;case"x":s=(parseInt(s,10)>>>0).toString(16);break;case"X":s=(parseInt(s,10)>>>0).toString(16).toUpperCase();break}a.json.test(c.type)?y+=s:(!a.number.test(c.type)||d&&!c.sign?_="":(_=d?"+":"-",s=s.toString().replace(a.sign,"")),l=c.pad_char?"0"===c.pad_char?"0":c.pad_char.charAt(1):" ",p=c.width-(_+s).length,r=c.width&&p>0?l.repeat(p):"",y+=c.align?_+s+r:"0"===l?_+r+s:r+_+s)}return y}var r=Object.create(null);function l(t){if(r[t])return r[t];var i,s=t,e=[],o=0;while(s){if(null!==(i=a.text.exec(s)))e.push(i[0]);else if(null!==(i=a.modulo.exec(s)))e.push("%");else{if(null===(i=a.placeholder.exec(s)))throw new SyntaxError("[sprintf] unexpected placeholder");if(i[2]){o|=1;var n=[],c=i[2],l=[];if(null===(l=a.key.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");n.push(l[1]);while(""!==(c=c.substring(l[0].length)))if(null!==(l=a.key_access.exec(c)))n.push(l[1]);else{if(null===(l=a.index_access.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");n.push(l[1])}i[2]=n}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");e.push({placeholder:i[0],param_no:i[1],keys:i[2],sign:i[3],pad_char:i[4],align:i[5],width:i[6],precision:i[7],type:i[8]})}s=s.substring(i[0].length)}return r[t]=e}i["sprintf"]=o,i["vsprintf"]=n,"undefined"!==typeof window&&(window["sprintf"]=o,window["vsprintf"]=n,e=function(){return{sprintf:o,vsprintf:n}}.call(i,s,i,t),void 0===e||(t.exports=e))}()}}]);