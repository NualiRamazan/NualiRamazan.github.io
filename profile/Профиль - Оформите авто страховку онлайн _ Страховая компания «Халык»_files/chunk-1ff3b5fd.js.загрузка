(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ff3b5fd"],{"09c7":function(e,t,i){},"2a9b":function(e,t,i){"use strict";i("09c7")},"9f73":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"user-profile"},[i("div",{staticClass:"menu"},[e._t("default")],2),i("div",{staticClass:"content loading-wrap"},[e.formLoading>0?i("div",{staticClass:"loading"}):e._e(),"person"===e.clientKind||"ie"===e.clientKind?i("div",{staticClass:"form"},[i("div",{staticClass:"form-title"},[e._v(e._s(e.$v("STR_FULL_NAME")))]),i("div",{staticClass:"row"},[i("text-field",{attrs:{label:e.$v("STR_LAST_NAME"),error:e.errorsName.lastName},model:{value:e.fieldsName.lastName,callback:function(t){e.$set(e.fieldsName,"lastName",t)},expression:"fieldsName.lastName"}})],1),i("div",{staticClass:"row"},[i("text-field",{attrs:{label:e.$v("STR_FIRST_NAME"),error:e.errorsName.firstName},model:{value:e.fieldsName.firstName,callback:function(t){e.$set(e.fieldsName,"firstName",t)},expression:"fieldsName.firstName"}})],1),i("div",{staticClass:"row margin-20"},[i("text-field",{attrs:{label:e.$v("STR_PATRONYMIC"),error:e.errorsName.patronymic},model:{value:e.fieldsName.patronymic,callback:function(t){e.$set(e.fieldsName,"patronymic",t)},expression:"fieldsName.patronymic"}})],1),i("div",{staticClass:"row"},[i("button",{staticClass:"button",attrs:{type:"button"},on:{click:e.submitName}},[e._v(" "+e._s(e.$v("STR_SAVE"))+" ")])])]):e._e(),"ie"===e.clientKind||"entity"===e.clientKind?i("div",{staticClass:"form"},[i("div",{staticClass:"form-title"},[e._v(e._s(e.$v("STR_ORGANIZATION_TITLE")))]),i("div",{staticClass:"row"},[i("text-field",{attrs:{label:e.$v("STR_ORGANIZATION_TITLE"),error:e.errorsTitle.title},model:{value:e.fieldsTitle.title,callback:function(t){e.$set(e.fieldsTitle,"title",t)},expression:"fieldsTitle.title"}})],1),i("div",{staticClass:"row"},[i("button",{staticClass:"button",attrs:{type:"button"},on:{click:e.submitTitle}},[e._v(" "+e._s(e.$v("STR_SAVE"))+" ")])])]):e._e(),i("div",{staticClass:"form"},[i("div",{staticClass:"form-title"},[e._v(e._s(e.$v("STR_LOCATION")))]),i("div",{staticClass:"row"},[i("select-field",{attrs:{placeholder:e.$v("STR_ADDR_CITY"),options:e.citiesExtended,label:"id",keyField:"id",titleField:"title",error:e.errorsLocation.cityId},model:{value:e.fieldsLocation.cityId,callback:function(t){e.$set(e.fieldsLocation,"cityId",t)},expression:"fieldsLocation.cityId"}})],1),i("div",{staticClass:"row margin-20"},[i("text-field",{attrs:{label:e.$v("STR_ADDRESS"),error:e.errorsLocation.address},model:{value:e.fieldsLocation.address,callback:function(t){e.$set(e.fieldsLocation,"address",t)},expression:"fieldsLocation.address"}})],1),i("div",{staticClass:"row"},[i("button",{staticClass:"button",attrs:{type:"button"},on:{click:e.submitAddress}},[e._v(" "+e._s(e.$v("STR_SAVE"))+" ")])])]),"person"===e.clientKind||"ie"===e.clientKind?i("div",{staticClass:"form"},[i("div",{staticClass:"form-title"},[e._v(e._s(e.$v("STR_IDENTITY_DOCUMENT")))]),i("div",{staticClass:"row"},[i("select-field",{attrs:{placeholder:e.$v("STR_TYPE"),options:[{id:"IC",title:e.$v("STR_IDENTITY_CARD_RK")},{id:"PS",title:e.$v("STR_PASSPORT_RK")},{id:"RPF",title:e.$v("STR_RESIDENCE_PERMIT_RK")}],label:"id",keyField:"id",titleField:"title",error:e.errorsPersonalDoc.docType},model:{value:e.fieldsPersonalDoc.docType,callback:function(t){e.$set(e.fieldsPersonalDoc,"docType",t)},expression:"fieldsPersonalDoc.docType"}})],1),i("div",{staticClass:"row"},[i("text-field",{attrs:{label:e.$v("STR_NUMBER"),error:e.errorsPersonalDoc.docNumber},model:{value:e.fieldsPersonalDoc.docNumber,callback:function(t){e.$set(e.fieldsPersonalDoc,"docNumber",t)},expression:"fieldsPersonalDoc.docNumber"}})],1),i("div",{staticClass:"row margin-20"},[i("date-field",{attrs:{placeholder:e.$v("STR_DATE"),"min-date":new Date((new Date).setFullYear((new Date).getFullYear()-10)),"max-date":new Date,"default-panel":"year",error:e.errorsPersonalDoc.docDate},model:{value:e.fieldsPersonalDoc.docDate,callback:function(t){e.$set(e.fieldsPersonalDoc,"docDate",t)},expression:"fieldsPersonalDoc.docDate"}})],1),i("div",{staticClass:"row"},[i("button",{staticClass:"button",attrs:{type:"button"},on:{click:e.submitPersonalDocument}},[e._v(" "+e._s(e.$v("STR_SAVE"))+" ")])])]):e._e(),"ie"===e.clientKind||"entity"===e.clientKind?i("div",{staticClass:"form"},[i("div",{staticClass:"form-title"},[e._v(e._s(e.$v("STR_ACTIVITY_DOCUMENT")))]),i("div",{staticClass:"row"},[i("text-field",{attrs:{label:e.$v("STR_NUMBER"),error:e.errorsCompanyDoc.docNumber},model:{value:e.fieldsCompanyDoc.docNumber,callback:function(t){e.$set(e.fieldsCompanyDoc,"docNumber",t)},expression:"fieldsCompanyDoc.docNumber"}})],1),i("div",{staticClass:"row margin-20"},[i("date-field",{attrs:{placeholder:e.$v("STR_DATE"),"min-date":new Date((new Date).setFullYear((new Date).getFullYear()-10)),"max-date":new Date,"default-panel":"year",error:e.errorsCompanyDoc.docDate},model:{value:e.fieldsCompanyDoc.docDate,callback:function(t){e.$set(e.fieldsCompanyDoc,"docDate",t)},expression:"fieldsCompanyDoc.docDate"}})],1),i("div",{staticClass:"row"},[i("button",{staticClass:"button",attrs:{type:"button"},on:{click:e.submitCompanyDocument}},[e._v(" "+e._s(e.$v("STR_SAVE"))+" ")])])]):e._e()])])},o=[],a=i("a109"),r=i("652a"),n={name:"UserProfile",data(){return{clientKind:null,fieldsName:{lastName:"",firstName:"",patronymic:""},errorsName:{lastName:!1,firstName:!1,patronymic:!1},fieldsTitle:{title:""},errorsTitle:{title:!1},fieldsLocation:{cityId:null,stateId:null,regionId:null,address:""},errorsLocation:{cityId:!1,address:!1},fieldsPersonalDoc:{docType:"IC",docNumber:"",docDate:null},errorsPersonalDoc:{docType:!1,docNumber:!1,docDate:!1},fieldsCompanyDoc:{docNumber:"",docDate:null},errorsCompanyDoc:{docNumber:!1,docDate:!1},formLoading:0,dictionaries:{states:[],regions:[],cities:[],stateCountries:{},regionState:{},cityRegion:{}}}},computed:{citiesExtended(){return this.dictionaries.cities.map(e=>{const t=this.getRegion(this.dictionaries.cityRegion[e.id||0]||0)||{},i=this.getState(this.dictionaries.regionState[t.id||0]||"")||{};return{id:e.id,title:(e.title+", "+(i.title||"")+", "+(t.title||"")).replace(/^[\s\uFEFF\xA0,]+|[\s\uFEFF\xA0,]+$/g,"")}})}},watch:{"fieldsLocation.cityId":function(){this.updateCity()},dictionaries:{deep:!0,handler:function(){this.updateCity()}}},methods:{getRegion(e){for(const t of this.dictionaries.regions)if(t.id==e)return t;return null},getState(e){for(const t of this.dictionaries.states)if(t.id==e)return t;return null},updateCity(){const e=this.fieldsLocation.cityId;if(!e)return this.fieldsLocation.stateId=null,void(this.fieldsLocation.regionId=null);const t=this.getRegion(this.dictionaries.cityRegion[e||0]||0)||{},i=this.getState(this.dictionaries.regionState[t.id||0]||"")||{};this.fieldsLocation.stateId=i.id,this.fieldsLocation.regionId=t.id},submitName(){let e=!1;this.errorsName={lastName:!1,firstName:!1,patronymic:!1},this.fieldsName.firstName||(this.errorsName.firstName=!0,e=!0),this.fieldsName.lastName||(this.errorsName.lastName=!0,e=!0),e||(this.formLoading++,this.$axios.post("/User/save/name",this.fieldsName).then(e=>{this.formLoading--,0===e.code?this.$root.openDialog(this.$v("STR_PROFILE_SAVED")):this.$root.openDialog(Object(a["a"])(e),{html:!0,textClass:["text-align-center"]})}).catch(e=>{console.error(e),this.$root.openDialog(this.$v("STR_SYSTEM_ERROR"),{html:!0,textClass:["text-align-center"]})}))},submitTitle(){let e=!1;this.errorsTitle={title:!1},this.fieldsTitle.title||(this.errorsTitle.title=!0,e=!0),e||(this.formLoading++,this.$axios.post("/User/save/title",this.fieldsTitle).then(e=>{this.formLoading--,0===e.code?this.$root.openDialog(this.$v("STR_PROFILE_SAVED")):this.$root.openDialog(Object(a["a"])(e),{html:!0,textClass:["text-align-center"]})}).catch(e=>{console.error(e),this.$root.openDialog(this.$v("STR_SYSTEM_ERROR"),{html:!0,textClass:["text-align-center"]})}))},submitAddress(){let e=!1;this.errorsLocation={cityId:!1,address:!1},this.fieldsLocation.cityId||(this.errorsLocation.cityId=!0,e=!0),this.fieldsLocation.address||(this.errorsLocation.address=!0,e=!0),e||(this.formLoading++,this.$axios.post("/User/save/address",this.fieldsLocation).then(e=>{this.formLoading--,0===e.code?this.$root.openDialog(this.$v("STR_PROFILE_SAVED")):this.$root.openDialog(Object(a["a"])(e),{html:!0,textClass:["text-align-center"]})}).catch(e=>{console.error(e),this.$root.openDialog(this.$v("STR_SYSTEM_ERROR"),{html:!0,textClass:["text-align-center"]})}))},submitPersonalDocument(){let e=!1;this.errorsPersonalDoc={docType:!1,docNumber:!1,docDate:!1},this.fieldsPersonalDoc.docType||(this.errorsPersonalDoc.docType=!0,e=!0),this.fieldsPersonalDoc.docNumber||(this.errorsPersonalDoc.docNumber=!0,e=!0),this.fieldsPersonalDoc.docDate||(this.errorsPersonalDoc.docDate=!0,e=!0),e||(this.formLoading++,this.$axios.post("/User/save/personalDocument",this.fieldsPersonalDoc).then(e=>{this.formLoading--,0===e.code?this.$root.openDialog(this.$v("STR_PROFILE_SAVED")):this.$root.openDialog(Object(a["a"])(e),{html:!0,textClass:["text-align-center"]})}).catch(e=>{console.error(e),this.$root.openDialog(this.$v("STR_SYSTEM_ERROR"),{html:!0,textClass:["text-align-center"]})}))},submitCompanyDocument(){let e=!1;this.errorsCompanyDoc={docNumber:!1,docDate:!1},this.fieldsCompanyDoc.docNumber||(this.errorsCompanyDoc.docNumber=!0,e=!0),this.fieldsCompanyDoc.docDate||(this.errorsCompanyDoc.docDate=!0,e=!0),e||(this.formLoading++,this.$axios.post("/User/save/companyDocument",this.fieldsCompanyDoc).then(e=>{this.formLoading--,0===e.code?this.$root.openDialog(this.$v("STR_PROFILE_SAVED")):this.$root.openDialog(Object(a["a"])(e),{html:!0,textClass:["text-align-center"]})}).catch(e=>{console.error(e),this.$root.openDialog(this.$v("STR_SYSTEM_ERROR"),{html:!0,textClass:["text-align-center"]})}))}},mounted(){this.formLoading++,this.$axios.get("/User/getAuthorizedUserData").then(e=>{this.formLoading--,0===e.code?(this.clientKind=e.data.clientKind,this.fieldsName=e.data.fieldsName,this.fieldsTitle=e.data.fieldsTitle,this.fieldsLocation=e.data.fieldsLocation,this.fieldsPersonalDoc=e.data.fieldsPersonalDoc,this.fieldsPersonalDoc.docDate&&(this.fieldsPersonalDoc.docDate=Object(r["a"])(this.fieldsPersonalDoc.docDate)),this.fieldsCompanyDoc=e.data.fieldsCompanyDoc,this.fieldsCompanyDoc.docDate&&(this.fieldsCompanyDoc.docDate=Object(r["a"])(this.fieldsCompanyDoc.docDate))):window.location="/#login"}).catch(e=>{console.error(e),this.$root.openDialog(this.$v("STR_SYSTEM_ERROR"),{html:!0,textClass:["text-align-center"]})}),this.formLoading++,this.$axios.get("/ApartmentsAndHouses/getDictionaries/"+window.config.lang_id).then(e=>{this.formLoading--,0===e.code&&e.data?this.dictionaries=e.data:0!==e.code&&this.$root.openDialog(Object(a["a"])(e),{html:!0,textClass:["text-align-center"]})}).catch(e=>{throw this.formLoading--,e})}},l=n,c=(i("2a9b"),i("2877")),d=Object(c["a"])(l,s,o,!1,null,"40373867",null);t["default"]=d.exports},a109:function(e,t,i){"use strict";var s=i("e19f"),o=i("a6fe");t["a"]=function(e){if(0===e.code)return null;let t=null;return e.msgId&&(t=Object(o["a"])(e.msgId),t&&t.length>0&&e.msgData&&(t=Object(s["vsprintf"])(t,e.msgData))),!t&&e.rawMsg&&(t=e.rawMsg),t||(t=Object(o["a"])("STR_SYSTEM_ERROR")),t||(t="Произошла ошибка"),t}},e19f:function(e,t,i){var s;!function(){"use strict";var o={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(e){return n(c(e),arguments)}function r(e,t){return a.apply(null,[e].concat(t||[]))}function n(e,t){var i,s,r,n,l,c,d,f,p,m=1,u=e.length,h="";for(s=0;s<u;s++)if("string"===typeof e[s])h+=e[s];else if("object"===typeof e[s]){if(n=e[s],n.keys)for(i=t[m],r=0;r<n.keys.length;r++){if(void 0==i)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',n.keys[r],n.keys[r-1]));i=i[n.keys[r]]}else i=n.param_no?t[n.param_no]:t[m++];if(o.not_type.test(n.type)&&o.not_primitive.test(n.type)&&i instanceof Function&&(i=i()),o.numeric_arg.test(n.type)&&"number"!==typeof i&&isNaN(i))throw new TypeError(a("[sprintf] expecting number but found %T",i));switch(o.number.test(n.type)&&(f=i>=0),n.type){case"b":i=parseInt(i,10).toString(2);break;case"c":i=String.fromCharCode(parseInt(i,10));break;case"d":case"i":i=parseInt(i,10);break;case"j":i=JSON.stringify(i,null,n.width?parseInt(n.width):0);break;case"e":i=n.precision?parseFloat(i).toExponential(n.precision):parseFloat(i).toExponential();break;case"f":i=n.precision?parseFloat(i).toFixed(n.precision):parseFloat(i);break;case"g":i=n.precision?String(Number(i.toPrecision(n.precision))):parseFloat(i);break;case"o":i=(parseInt(i,10)>>>0).toString(8);break;case"s":i=String(i),i=n.precision?i.substring(0,n.precision):i;break;case"t":i=String(!!i),i=n.precision?i.substring(0,n.precision):i;break;case"T":i=Object.prototype.toString.call(i).slice(8,-1).toLowerCase(),i=n.precision?i.substring(0,n.precision):i;break;case"u":i=parseInt(i,10)>>>0;break;case"v":i=i.valueOf(),i=n.precision?i.substring(0,n.precision):i;break;case"x":i=(parseInt(i,10)>>>0).toString(16);break;case"X":i=(parseInt(i,10)>>>0).toString(16).toUpperCase();break}o.json.test(n.type)?h+=i:(!o.number.test(n.type)||f&&!n.sign?p="":(p=f?"+":"-",i=i.toString().replace(o.sign,"")),c=n.pad_char?"0"===n.pad_char?"0":n.pad_char.charAt(1):" ",d=n.width-(p+i).length,l=n.width&&d>0?c.repeat(d):"",h+=n.align?p+i+l:"0"===c?p+l+i:l+p+i)}return h}var l=Object.create(null);function c(e){if(l[e])return l[e];var t,i=e,s=[],a=0;while(i){if(null!==(t=o.text.exec(i)))s.push(t[0]);else if(null!==(t=o.modulo.exec(i)))s.push("%");else{if(null===(t=o.placeholder.exec(i)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){a|=1;var r=[],n=t[2],c=[];if(null===(c=o.key.exec(n)))throw new SyntaxError("[sprintf] failed to parse named argument key");r.push(c[1]);while(""!==(n=n.substring(c[0].length)))if(null!==(c=o.key_access.exec(n)))r.push(c[1]);else{if(null===(c=o.index_access.exec(n)))throw new SyntaxError("[sprintf] failed to parse named argument key");r.push(c[1])}t[2]=r}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");s.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}i=i.substring(t[0].length)}return l[e]=s}t["sprintf"]=a,t["vsprintf"]=r,"undefined"!==typeof window&&(window["sprintf"]=a,window["vsprintf"]=r,s=function(){return{sprintf:a,vsprintf:r}}.call(t,i,t,e),void 0===s||(e.exports=s))}()}}]);