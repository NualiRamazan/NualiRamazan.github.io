(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26039811"],{"0b2b":function(e,t,s){},a109:function(e,t,s){"use strict";var n=s("e19f"),i=s("a6fe");t["a"]=function(e){if(0===e.code)return null;let t=null;return e.msgId&&(t=Object(i["a"])(e.msgId),t&&t.length>0&&e.msgData&&(t=Object(n["vsprintf"])(t,e.msgData))),!t&&e.rawMsg&&(t=e.rawMsg),t||(t=Object(i["a"])("STR_SYSTEM_ERROR")),t||(t="Произошла ошибка"),t}},db6c:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isOpen?s("div",{staticClass:"popup-dialog-overlay",class:{open:e.isOpen},on:{click:e.overlayClick}},[s("div",{staticClass:"popup-dialog",class:{shake:e.shake},on:{click:function(e){e.stopPropagation()}}},[s("div",{staticClass:"content"},[s("div",{staticClass:"title"},[e._v(" "+e._s(e.$v("STR_OTP_WINDOW_TITLE").split("[[TEL]]").join(e.formatedTel))+" ")]),e.message1?s("div",{staticClass:"description",domProps:{innerHTML:e._s(e.message1)}}):e._e(),s("text-field",{key:"code",attrs:{label:e.$v("STR_OTP_SMS_CODE"),inputmode:"numeric",pattern:"[0-9]*",mask:"9999"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),e.canBeResend?s("div",{staticClass:"resend"},[e._v(" "+e._s(e.$v("STR_OTP_WINDOW_BEFORE_RESEND"))+" "),s("button",{on:{click:function(t){return e.send(e.tel,e.message1,e.message2,e.callback)}}},[e._v(" "+e._s(e.$v("STR_OTP_WINDOW_RESEND"))+" ")]),e._v(" "+e._s(e.$v("STR_OTP_WINDOW_AFTER_RESEND"))+" ")]):s("div",{staticClass:"resend"},[e._v(" "+e._s(e.getResendText(e.resendTimer))+" ")]),e.message2?s("div",{staticClass:"terms",domProps:{innerHTML:e._s(e.message2)}}):e._e(),s("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.close}},[s("svg-icon",{attrs:{icon:"close"}})],1)],1)])]):e._e()},i=[],a=s("a109"),r={data(){return{isOpen:!1,shake:!1,tel:"",code:"",token:"",message1:"",message2:"",callback:null,sendTime:Date.now()/1e3,nowTime:Date.now()/1e3}},computed:{resendTimer(){const e=parseInt(this.$v("RESEND_SMS_TIMEOUT"));return Math.round(e-(this.nowTime-this.sendTime))},canBeResend(){return this.resendTimer<=0},formatedTel(){const e=this.tel.replace(/[^0-9]/gi,"");return"+"+e.substring(0,1)+" ("+e.substring(1,4)+") "+e.substring(4,7)+" "+e.substring(7,9)+" "+e.substring(9)}},watch:{code(){const e=this.code.replace(/[^0-9]/gi,"");4===e.length&&this.$axios.get("/Otp/verify/"+this.tel+"/"+this.token+"/"+this.code).then(e=>{0===e.code?(this.isOpen=!1,this.callback&&(this.callback(this.tel,this.token,this.code),this.callback=null)):50!==e.code&&(this.code="",this.$root.openDialog(Object(a["a"])(e),{html:!0,textClass:["text-align-center"]}))}).catch(e=>{throw e})}},methods:{send(e,t,s,n){this.isOpen=!0,this.code="",this.sendTime=Date.now()/1e3,this.tel=e,this.message1=t,this.message2=s,this.callback=n,this.$axios.post("/Otp/send/"+e).then(e=>{0===e.code&&e.data.token?this.token=e.data.token:0!==e.code&&(this.$root.openDialog(Object(a["a"])(e),{html:!0,textClass:["text-align-center"]}),this.isOpen=!1)}).catch(e=>{throw this.isOpen=!1,e})},close(){this.isOpen=!1,this.callback=null},overlayClick(){this.shake=!0,setTimeout(()=>{this.shake=!1},1e3)},getResendText(e){const t=Math.floor(e/60),s=e%60;let n="";t>0&&(n+=t+" "+this.$v("STR_MIN")+" "),s>0&&(n+=s+" "+this.$v("STR_SEC")+" ");const i=this.$v("STR_OTP_WINDOW_RESEND_TIMER");return i.split("[[TIMER]]").join(n)}},mounted(){setInterval(()=>{this.isOpen&&(this.nowTime=Date.now()/1e3)},500)}},o=r,c=(s("ed53"),s("2877")),l=Object(c["a"])(o,n,i,!1,null,"969e23ba",null);t["default"]=l.exports},e19f:function(e,t,s){var n;!function(){"use strict";var i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(e){return o(l(e),arguments)}function r(e,t){return a.apply(null,[e].concat(t||[]))}function o(e,t){var s,n,r,o,c,l,p,d,u,h=1,g=e.length,f="";for(n=0;n<g;n++)if("string"===typeof e[n])f+=e[n];else if("object"===typeof e[n]){if(o=e[n],o.keys)for(s=t[h],r=0;r<o.keys.length;r++){if(void 0==s)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',o.keys[r],o.keys[r-1]));s=s[o.keys[r]]}else s=o.param_no?t[o.param_no]:t[h++];if(i.not_type.test(o.type)&&i.not_primitive.test(o.type)&&s instanceof Function&&(s=s()),i.numeric_arg.test(o.type)&&"number"!==typeof s&&isNaN(s))throw new TypeError(a("[sprintf] expecting number but found %T",s));switch(i.number.test(o.type)&&(d=s>=0),o.type){case"b":s=parseInt(s,10).toString(2);break;case"c":s=String.fromCharCode(parseInt(s,10));break;case"d":case"i":s=parseInt(s,10);break;case"j":s=JSON.stringify(s,null,o.width?parseInt(o.width):0);break;case"e":s=o.precision?parseFloat(s).toExponential(o.precision):parseFloat(s).toExponential();break;case"f":s=o.precision?parseFloat(s).toFixed(o.precision):parseFloat(s);break;case"g":s=o.precision?String(Number(s.toPrecision(o.precision))):parseFloat(s);break;case"o":s=(parseInt(s,10)>>>0).toString(8);break;case"s":s=String(s),s=o.precision?s.substring(0,o.precision):s;break;case"t":s=String(!!s),s=o.precision?s.substring(0,o.precision):s;break;case"T":s=Object.prototype.toString.call(s).slice(8,-1).toLowerCase(),s=o.precision?s.substring(0,o.precision):s;break;case"u":s=parseInt(s,10)>>>0;break;case"v":s=s.valueOf(),s=o.precision?s.substring(0,o.precision):s;break;case"x":s=(parseInt(s,10)>>>0).toString(16);break;case"X":s=(parseInt(s,10)>>>0).toString(16).toUpperCase();break}i.json.test(o.type)?f+=s:(!i.number.test(o.type)||d&&!o.sign?u="":(u=d?"+":"-",s=s.toString().replace(i.sign,"")),l=o.pad_char?"0"===o.pad_char?"0":o.pad_char.charAt(1):" ",p=o.width-(u+s).length,c=o.width&&p>0?l.repeat(p):"",f+=o.align?u+s+c:"0"===l?u+c+s:c+u+s)}return f}var c=Object.create(null);function l(e){if(c[e])return c[e];var t,s=e,n=[],a=0;while(s){if(null!==(t=i.text.exec(s)))n.push(t[0]);else if(null!==(t=i.modulo.exec(s)))n.push("%");else{if(null===(t=i.placeholder.exec(s)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){a|=1;var r=[],o=t[2],l=[];if(null===(l=i.key.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");r.push(l[1]);while(""!==(o=o.substring(l[0].length)))if(null!==(l=i.key_access.exec(o)))r.push(l[1]);else{if(null===(l=i.index_access.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");r.push(l[1])}t[2]=r}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}s=s.substring(t[0].length)}return c[e]=n}t["sprintf"]=a,t["vsprintf"]=r,"undefined"!==typeof window&&(window["sprintf"]=a,window["vsprintf"]=r,n=function(){return{sprintf:a,vsprintf:r}}.call(t,s,t,e),void 0===n||(e.exports=n))}()},ed53:function(e,t,s){"use strict";s("0b2b")}}]);